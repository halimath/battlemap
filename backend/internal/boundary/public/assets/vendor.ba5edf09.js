function F(n,e){return typeof n!="string"?n:(e||(e=document.body),e.querySelector(n))}function h(n){m(n.firstChild)}function m(n,e){for(;n&&n!==e;){let t=n;n=n.nextSibling,t.parentNode.removeChild(t)}}function P(n){return typeof n=="function"||Array.isArray(n)||n instanceof Element||D(n)}function x(n,e,t){t=t!=null?t:!0;const i=typeof n=="string"?F(n):n;H(i,e),t&&$(i)}function $(n){if(!n.isConnected)return;let e=document.createTreeWalker(n,NodeFilter.SHOW_ELEMENT,B),t;for(;t=e.nextNode();)t.dispatchEvent(new CustomEvent("update",{bubbles:!1}));for(e=document.createTreeWalker(n,NodeFilter.SHOW_ELEMENT,W);t=e.nextNode();)t.dispatchEvent(new CustomEvent("update",{bubbles:!1}))}const B=n=>n.nodeType===Node.ELEMENT_NODE&&n.nodeName.indexOf("-")>=0?NodeFilter.FILTER_REJECT:NodeFilter.FILTER_ACCEPT,W=n=>n.nodeType===Node.ELEMENT_NODE&&n.nodeName.indexOf("-")>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_REJECT;function H(n,e){if(Array.isArray(e)){h(n),e.forEach(t=>{const i=document.createDocumentFragment();x(i,t),n.appendChild(i)});return}if(typeof e=="string"){h(n),n.appendChild(document.createTextNode(e));return}if(e instanceof Element){h(n),n.appendChild(e);return}if(D(e)){e.updateElement(n);return}e(n)}function D(n){return typeof n=="object"&&"updateElement"in n}const M="{{wecco:",R="}}",_=/(\{\{wecco:\d+\}\})/;function z(n){return n.split(_).filter(e=>e.length>0)}function u(n){return!!n.match(_)}function c(n){return parseInt(n.substr(M.length))}function A(n){return M+n.toString()+R}const b=new WeakMap;class f{constructor(e,t){this.strings=e,this.data=t}get templateString(){return typeof this._templateString=="undefined"&&([this._templateString,this._attributeMappings]=j(this.strings)),this._templateString}get templateElement(){return typeof this._templateElement=="undefined"&&(this._templateElement=document.createElement("template"),this._templateElement.innerHTML=this.templateString,this._bindings=Z(this._templateElement.content,this)),this._templateElement}get bindings(){return typeof this._bindings=="undefined"?[]:this._bindings}updateElement(e){if(b.has(e)){const t=b.get(e);if(t.strings===this.strings){t.data=this.data,y(t.bindings,this.data);return}}h(e),e.appendChild(this.templateElement.content.cloneNode(!0)),Y(this.bindings,e),y(this.bindings,this.data),b.set(e,this)}attributeName(e){return this._attributeMappings.get(e)}}const V=/([.?@]?[a-z0-9-_@]+)\s*=\s*$/i,G=/([.?@]?[a-z0-9-_@]+)\s*=\s*'[^']*$/i,X=/([.?@]?[a-z0-9-_@]+)\s*=\s*"[^"]*$/i;function j(n){let e="";const t=new Map;return n.forEach((i,r)=>{if(e+=i,r<n.length-1){const s=V.exec(e)||G.exec(e)||X.exec(e);if(s){const o=A(r);e+=o,t.set(o,s[1])}else e+=`<!--${A(r)}-->`}}),[e.trim(),t]}const p="DOM inconsistency error";class g{constructor(e){this.nodeIndex=e}bind(e,t){t===this.nodeIndex&&this.bindNode(e)}bindNode(e){this.node=e}}class E extends g{constructor(e,t){super(e);this.dataIndex=t}applyData(e){const t=e[this.dataIndex];this.boundData!==t&&(this.applyChangedData(t),this.boundData=t)}}class N extends g{constructor(e,t){super(e);this.dataIndex=t}bindNode(e){super.bindNode(e),e.data="",this.endMarker=e,this.startMarker=e.parentNode.insertBefore(k(),e)}applyData(e){const t=e[this.dataIndex];this.boundData!==t&&(typeof t=="string"?this.applyText(t):q(t)?this.applyIterable(t):P(t)?this.applyElementUpdate(t):this.applyText(String(t)))}applyIterable(e){const t=Array.from(e);if(Array.isArray(this.boundData)){const i=this.boundData;t.length<i.length?(m(i[t.length].startMarker,this.endMarker),this.boundData=i.slice(0,t.length)):t.length>i.length&&this.createBindingsFromIterable(t,i.length)}else this.clear(),this.boundData=[],this.createBindingsFromIterable(t);this.boundData.forEach(i=>i.applyData(t))}createBindingsFromIterable(e,t=0){for(let i=t;i<e.length;++i){const r=this.endMarker.parentNode.insertBefore(k(),this.endMarker),s=new N(this.nodeIndex,i);s.bind(r,this.nodeIndex),this.boundData.push(s)}}applyElementUpdate(e){if(e instanceof f&&this.boundData instanceof f&&e.templateString===this.boundData.templateString){this.boundData.data=e.data,y(this.boundData.bindings,e.data);return}this.clear();const t=document.createDocumentFragment();x(t,e,!1),this.endMarker.parentNode.insertBefore(t,this.endMarker),this.boundData=e}applyText(e){if(this.endMarker.previousSibling.nodeType===Node.TEXT_NODE){this.endMarker.previousSibling.data=e,this.boundData=e;return}this.clear(),this.node=this.endMarker.parentNode.insertBefore(document.createTextNode(e),this.endMarker),this.boundData=e}clear(){var e;const t=this.startMarker?this.startMarker.nextSibling:this.node.parentNode.firstChild;m(t,(e=this.endMarker)!==null&&e!==void 0?e:this.node)}}class J extends g{constructor(e,t,i,r){super(e);this.attributeName=t,this.valueInstructions=i,this.directives=r}bindNode(e){if(e.nodeType!==Node.ELEMENT_NODE)throw console.error(`Expected element to set attribute ${this.attributeName} but got ${e}`),p;this.element=e,super.bindNode(e)}applyData(e){let t=!1;const i=this.valueInstructions.map(r=>{if(typeof r=="string")return r;let s=e[r];return(typeof s=="undefined"||s===null)&&(t=!0),s}).join("");if(t&&this.directives.omitEmpty){this.element.removeAttribute(this.attributeName),this.boundAttributeValue=void 0;return}i!==this.boundAttributeValue&&(this.element.setAttribute(this.attributeName,i),this.boundAttributeValue=i)}}class Q extends E{constructor(e,t,i){super(e,i);this.attributeName=t}bindNode(e){if(e.nodeType!==Node.ELEMENT_NODE)throw console.error(`Expected element to set attribute ${this.attributeName} but got ${e}`),p;this.element=e,super.bindNode(e)}applyChangedData(e){e?this.element.setAttribute(this.attributeName,this.attributeName):this.element.removeAttribute(this.attributeName)}}class U extends E{constructor(e,t,i,r){super(e,i);this.eventName=t,this.directives=r}bindNode(e){if(e.nodeType!==Node.ELEMENT_NODE)throw console.error(`Expected element to set attribute ${this.eventName} but got ${e}`),p;this.element=e,super.bindNode(e)}applyChangedData(e){this.boundListener&&this.element.removeEventListener(this.eventName,this.boundListener),this.boundListener=this.createListener(e),this.element.addEventListener(this.eventName,this.boundListener,this.directives)}createListener(e){return!this.directives.stopPropagation&&!this.directives.stopImmediatePropagation&&!this.directives.preventDefault?e:t=>{this.directives.stopPropagation&&t.stopPropagation(),this.directives.stopImmediatePropagation&&t.stopImmediatePropagation(),this.directives.preventDefault&&t.preventDefault(),"handleEvent"in e?e.handleEvent(t):e(t)}}}class K extends E{constructor(e,t,i){super(e,i);this.propertyName=t}bindNode(e){if(e.nodeType!==Node.ELEMENT_NODE)throw console.error(`Expected element to set property ${this.propertyName} but got ${e}`),p;this.element=e,super.bindNode(e)}applyChangedData(e){this.element[this.propertyName]=e}}function y(n,e){n.forEach(t=>t.applyData(e))}function Y(n,e){const t=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT|NodeFilter.SHOW_COMMENT|NodeFilter.SHOW_TEXT,null);let i=-1,r;for(;r=t.nextNode();)i++,n.forEach(s=>s.bind(r,i))}function Z(n,e){const t=[],i=document.createTreeWalker(n,NodeFilter.SHOW_ELEMENT|NodeFilter.SHOW_COMMENT|NodeFilter.SHOW_TEXT,null);let r=-1,s;for(;s=i.nextNode();)if(r++,s.nodeType===Node.COMMENT_NODE){const o=s;u(o.data)&&t.push(new N(r,c(o.data)))}else if(s.nodeType===Node.ELEMENT_NODE){const o=s;for(let d of o.getAttributeNames()){const w=o.getAttribute(d),l=z(w);if(d.startsWith("?")){if(o.removeAttribute(d),l.length!==1||!u(l[0])){console.error(`Got syntax error using boolean attribute ${d}: Only single placeholder is allowed as value. Found at ${o}.`);continue}t.push(new Q(r,d.substring(1),c(l[0])));continue}if(d.startsWith(".")){if(o.removeAttribute(d),l.length!==1||!u(l[0])){console.error(`Got syntax error using property ${d}: Only single placeholder is allowed as value. Found at ${o}.`);continue}const a=e.attributeName(l[0]);t.push(new K(r,a.substring(1),c(l[0])));continue}if(d.startsWith("@")){if(o.removeAttribute(d),l.length!==1||!u(l[0])){console.error(`Got syntax error using event listener ${d}: Only single placeholder is allowed as value. Found at ${o}.`);continue}const a={},[O,...S]=d.substring(1).split("+");S.forEach(T=>{switch(T.toLocaleLowerCase()){case"capture":a.capture=!0;break;case"passive":a.passive=!0;break;case"once":a.once=!0;break;case"stoppropagation":a.stopPropagation=!0;break;case"stopimmediatepropagation":a.stopImmediatePropagation=!0;break;case"preventdefault":a.preventDefault=!0;break;default:console.warn(`unrecognized event binding directive: "${T}"`)}}),t.push(new U(r,O,c(l[0]),a));continue}if(l.length===1&&!u(l[0]))continue;o.removeAttribute(d);const I=l.map(a=>u(a)?c(a):a),v={},[C,...L]=d.split("+");L.forEach(a=>{switch(a.toLocaleLowerCase()){case"omitempty":v.omitEmpty=!0;break;default:console.warn(`unrecognized attribute binding directive: "${a}"`)}}),t.push(new J(r,C,I,v))}}return t}function k(){return document.createComment("")}function q(n){return Array.isArray(n)||!!(n&&n[Symbol.iterator])}function ee(n,...e){return new f(n,e)}export{ee as h,x as u};
